# 원시값과 객체의 비교

자바스크립트가 제공하는 7가지 데이터 타입

- 원시 타입
- 객체

1. 원시 타입의 값은 변경 불가능한 값이다. 
   객체는 변경 가능한 값이다.
2. 원시 값을 변수에 할당하면 변수에 실제 값이 저장된다
   객체는 변수에 할당하면 변수에는 참조 값이 저장된다.
3. 원시 값을 갖는 변수를 다른 변수에 할당하면 원본의 원시 값이 복사되어 전달된다. **(= 값에 의한 전달)**
   객체는 객체를 가르키는 변수를 다른 변수에 할당하면 원본의 참조 값이 복사되어 전달된다 **(= 참조에 의한 전달)**



## 원시 값

### 변경 불가능한 값

원시 타입의 값 = 즉 원시 값은 변경 불가능한 값이다.
한번 생성된 값은 read only한 값으로 변경할 수 없다.

> 변경 불가능하다는 것은 변수가 아니라 값에 대한 진술
>
> 변수가 참조하던 메모리 공간의 주소가 변경된 이유는 변수에 할당된 원시 값이 변경 불가능한 값이기 때문이다.



### 문자열과 불변성

```javascript
// 문자열은 0개 이상의 문자들로 이루어진 집합이다.
var str1 = '';      // 0개의 문자로 이루어진 문자열(빈 문자열)
var str2 = 'Hello'; // 5개의 문자로 이루어진 문자열
```

다른언어와 다르게 자바스크립트는 개발자 편의를 위해
문자열 타입이 원시타입이다.

즉, 자바스크립트의 문자열은 원시 타입이며 변경 불가능하다.



**유사 배열 객체** 
유사 배열 객체는 마치 배열처럼 인덱스로 프로퍼티 값에 접근할 수 있고
length 프로퍼티를 갖는 객체를 말한다.

문자열은 마치 배열처럼 인덱스를 통해 각 문자에 접근할 수 있으며

- length 프로퍼티를 갖는다.
- 유사 배열 객체이다.
- for 문으로 순회할 수 있다.

```javascript
var str = 'string';
str[0] = 'S';
console.log(str); // string
```

하지만 문자열은 원시 타입(= 변경 불가능한 값)이기때문에
원시 값은 어떤 일이 있어도 불변한다. 
(= 예기치 못한 변경으로 부터 자유롭고 신뢰성을 보장한다.)

그러나 변수에 새로운 문자열을 재할당하는 것은 물론 가능하다. 이는 기존 문자열을 변경하는 것이 아니라 새로운 문자열을 새롭게 할당하는 것이기 때문이다.

```javascript
var score = 80;
var copy = score;

console.log(score); // 80
console.log(copy);  // 80
// 이때 변수 score와 copy는 숫자값 80을 갖는다는 점에서는 동일하다. 
// 하지만 변수 score와 copy의 값 80은 
// 다른 메모리 공간에 저장된 별개의 값이다.
score = 100;

console.log(score); // 100
console.log(copy); // ?
```

`console.log(copy); // 80`

이처럼 변수에 원시값을 갖는 변수를 할당하면 할당받는 변수(copy)에는 
할당되는 변수(score)의 원시값이 복사되어 전달된다. 
이를 **값에 의한 전달(Pass by value)**라 한다.

엄격하게 표현하면 변수에는 값이 전달되는 것이 아니라 
메모리 주소가 전달되기 때문이다. 
이는 변수와 같은 **식별자는 값이 아니라 메모리 주소를 기억**하고 있기 때문이다.



## 객체

- 프로퍼티의 개수가 정해져있지 않다.
- 동적으로 추가 / 삭제 가능
- 프로퍼티의 값에도 제약이 없다.
- 원시 값과 같이 확보해야 할 메모리 크기를 사전에 정해 둘 수 없다.



### 변경 가능한 값

- 객체 타입의 값은 변경 가능한 값이다.

- 객체를 할당한 변수가 기억하는 메모리 주소를 통해 
  메모리 공간에 메모리 공간에 접근하면 참조값에 접근 할 수 있다.

  > 만약 원시 값처럼 이전 값을 복사하여 새롭게 생성한다면?
  >
  > - 신뢰성은 확보되겠지만 객체의 크기가 매우 클 수도 있고
  >   원시 값처럼 크기가 일정하지도 않고
  >   프로퍼티 값이 객체일 수도 있어서 
  >   복사하여 생성하는 비용이 많이 든다.
  >
  >   = 메모리의 효율적 소비가 어렵고 퍼포먼스가 나빠진다.



**얕은 복사(shallow copy) & 깉은 복사(deep copy)**

객체를 프로퍼티 값으로 갖는 객체일 경우, 
얕은 복사는 한 단계까지만 복사하는 것을 말하고
깊은 복사는 객체에 중첩되어 있는 객체까지 모두 복사하는것을 말한다.



**객체는 변경 가능한 값으로 디자인 되어있다.**

- 메모리를 효율적으로 사용하기 위해
- 객체의 복사하여 생성하는 비용을 절약하여 퍼포먼스를 향상시키기 위해
- 원시 값과는 다르게 여러 개의 식별자가 하나의 객체를 공유할 수 있다.



### 참조에 의한 전달

```javascript
var person = {
  name: 'Lee'
};

// 참조 값을 복사
var copy = person;
```

원본 또는 사본 어떤 한쪽에서 객체를 변경 (변수에 새로운 객체를 재할당하는 것이 아니라 객체의 프로퍼티 값 변경 또는 추가, 삭제)이 하면 서로 영향을 주고 받는다.

결국 **“값에 의한 전달”과 “참조에 의한 전달”은 식별자가 기억하는 메모리 공간에 저장되어 있는 값을 복사하여 전달한다는 면에서 동일하다.** 
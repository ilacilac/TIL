# useEffect Hook 

- 리액트 컴포넌트가 처음 화면에 나타날때, 사라지게 될때 특정 작업을 할 수 있음
- 컴포넌트의 props, state가 바껴서 업데이트될때 특정 작업을 할 수 있음
- 업데이트 되기전에 특정 작업을 할 수 있음
- 리랜더링될때마다 특정 작업을 할 수 있음



마운트 : 컴포넌트가 나타나는것을 의미
언마운트 : 컴포넌트가 삭제될때

```jsx
useEffect(() => {
  console.log('컴포넌트가 화면에 나타남')
}, []);
```

첫번째 파라미터 : 실행하고 싶은 함수
두번째 파라미터 : 배열, => deps, dependency, 의존되는 값들을 넣어준다. 
값이 비어있을 경우 컴포넌트가 처음 나타날때만 실행된다.



```js
useEffect(() => {
  console.log('컴포넌트가 화면에 나타남')
  return () => {
    console.log('컴포넌트가 화면에서 사라짐')
  }
}, []);
```

컴포넌트가 마운트 될때 추가하는 작업 : 

- props로 받은 값을 컴포넌트의 state로 설정할 때
- 외부 API (rest API 요청시) 컴포넌트가 나타나면 특정 API요청하게 될 때
- 라이브러리 사용시 (D3, Video.js...)
- setInterval, setTimeout



언마운트때 주로 하는 작업(클리너 함수):

- clearInterval, clearTimeout
- 라이브러리 인스턴스 제거



```js
useEffect(() => {
  console.log(user);
}, [user]);
```

userEffect에서 등록한 함수는 user이 설정되거나 바뀔때마다 호출된다.
설정되다 => 마운트 될때에도

>  랜더시, user값 출력
> 이름 클릭시 업데이트된 정보도 콘솔에 출력됨

userEffect에 등록한 함수는 특정값이 업데이트되고난 직후에 실행이 된다.



userEffect에 deps배열에 어떤값을 넣게 될 경우 해당값이 바뀔때마다 우리가 등록된 함수가 호출되고 해당값이 바뀌기 직전에 클리너 함수가 호출된다.
처음 랜더될때도 호출된다.
useEffect에 등록한 함수에서 props로 받아온 값을 참조하거나, useState에 관리하고있는 값을 참조할때 deps배열에 넣어 주어야 한다. => 그래야 user값이 최신의 값을 가리키게된다.

deps를 아에 안넣어주게될경우, 모든컴포넌트에서 userEffect가 실행된다 
리액트 컴포넌트에서는 부모컴포넌트가 리랜더링되면 자식 컴포넌트도 리랜더링된다
User컴포넌트의 부모 컴포넌트는 UserList이다.
UserList에서 users배열이 바뀌게 되면 리랜더링되는거고 결국 모든 User컴포넌트가 리랜더링 하는것이다.



- 첫번째 파라미터 : 함수
- 두번째 파라미터 : deps라는 배열 등록
- return을 하게될 경우 뒷정리함수이므로 업데이트되기 바로 직전에 호출된다.
- 조회하고있는값, 상태가 있을경우 deps에 넣어주는게 규칙,
- 비어있을경우 처음 컴포넌트가 나타날때만 호출되는것이다.
- return 함수를 넣어주면 컴포넌트가 사라질때 호출된다.

